<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GDPé¢„æµ‹ç³»ç»Ÿ API æ¥å£æµ‹è¯•</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
        }
        .header-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 0;
            margin-bottom: 20px;
        }
        .api-card {
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }
        .api-card:hover {
            transform: translateY(-2px);
        }
        .method-badge {
            font-size: 0.8rem;
            font-weight: bold;
        }
        .response-area {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 0.375rem;
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }
        .loading {
            color: #6c757d;
        }
        .success {
            color: #198754;
        }
        .error {
            color: #dc3545;
        }
        .param-input {
            margin-bottom: 10px;
        }
        .copy-btn {
            font-size: 0.8rem;
        }
    </style>
</head>
<body>

    <header class="header-bg">
        <div class="container">
            <h1 class="text-center">ğŸš€ GDPé¢„æµ‹ç³»ç»Ÿ API æ¥å£æµ‹è¯•</h1>
            <p class="text-center lead">å¿«é€Ÿæµ‹è¯•å’ŒæŸ¥çœ‹æ‰€æœ‰ API æ¥å£</p>
        </div>
    </header>

    <div class="container">

        <!-- åŸºç¡€æ•°æ® API -->
        <div class="row">
            <div class="col-12">
                <h3 class="mb-4">ğŸ“Š åŸºç¡€æ•°æ® API</h3>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="card api-card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">
                            <span class="badge bg-success method-badge me-2">GET</span>
                            è·å–æ•°æ®åº“è¡¨åˆ—è¡¨
                        </h5>
                    </div>
                    <div class="card-body">
                        <p><strong>æ¥å£åœ°å€ï¼š</strong> <code>/api/tables</code></p>
                        <p><strong>æè¿°ï¼š</strong> è·å–æ‰€æœ‰æ•°æ®åº“è¡¨çš„ä¿¡æ¯</p>
                        <button class="btn btn-primary btn-sm" onclick="testAPI('/api/tables', 'GET', null, 'tables-response')">
                            ğŸ§ª æµ‹è¯•æ¥å£
                        </button>
                        <button class="btn btn-outline-secondary btn-sm copy-btn ms-2" onclick="copyToClipboard('http://localhost:5000/api/tables')">
                            ğŸ“‹ å¤åˆ¶é“¾æ¥
                        </button>
                        <div id="tables-response" class="response-area mt-3" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card api-card">
                    <div class="card-header bg-info text-white">
                        <h5 class="mb-0">
                            <span class="badge bg-success method-badge me-2">GET</span>
                            è·å–è¡¨æ•°æ®
                        </h5>
                    </div>
                    <div class="card-body">
                        <p><strong>æ¥å£åœ°å€ï¼š</strong> <code>/api/{table_name}</code></p>
                        <p><strong>æè¿°ï¼š</strong> è·å–æŒ‡å®šè¡¨çš„æ•°æ®ï¼ˆæ”¯æŒåˆ†é¡µï¼‰</p>
                        <div class="param-input">
                            <label class="form-label">è¡¨åï¼š</label>
                            <select class="form-select" id="table-name-select">
                                <option value="å¹´åº¦æ•°æ®">å¹´åº¦æ•°æ®</option>
                                <option value="äººå£æ•°æ®">äººå£æ•°æ®</option>
                                <option value="æ¶ˆè´¹å“æ•°æ®">æ¶ˆè´¹å“æ•°æ®</option>
                                <option value="gdp_predictions">GDPé¢„æµ‹æ•°æ®</option>
                                <option value="model_training_metrics">è®­ç»ƒæŒ‡æ ‡</option>
                            </select>
                        </div>
                        <button class="btn btn-info btn-sm" onclick="testTableData()">
                            ğŸ§ª æµ‹è¯•æ¥å£
                        </button>
                        <div id="table-data-response" class="response-area mt-3" style="display: none;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- è€¦åˆåè°ƒåº¦åˆ†æ API -->
        <div class="row mt-4">
            <div class="col-12">
                <h3 class="mb-4">ğŸ”— è€¦åˆåè°ƒåº¦åˆ†æ API</h3>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <div class="card api-card">
                    <div class="card-header bg-warning text-dark">
                        <h5 class="mb-0">
                            <span class="badge bg-success method-badge me-2">GET</span>
                            è·å–åˆ†ææ•°æ®
                        </h5>
                    </div>
                    <div class="card-body">
                        <p><strong>æ¥å£åœ°å€ï¼š</strong> <code>/api/data</code></p>
                        <p><strong>æè¿°ï¼š</strong> è·å–æŒ‡å®šå¹´ä»½çš„è€¦åˆåè°ƒåº¦åˆ†ææ•°æ®</p>
                        <div class="param-input">
                            <label class="form-label">å¹´ä»½ï¼š</label>
                            <input type="number" class="form-control" id="coupling-year" value="2024" min="2005" max="2030">
                        </div>
                        <button class="btn btn-warning btn-sm" onclick="testCouplingData()">
                            ğŸ§ª æµ‹è¯•æ¥å£
                        </button>
                        <div id="coupling-data-response" class="response-area mt-3" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card api-card">
                    <div class="card-header bg-warning text-dark">
                        <h5 class="mb-0">
                            <span class="badge bg-success method-badge me-2">GET</span>
                            è·å–åœ°åŒºæ’å
                        </h5>
                    </div>
                    <div class="card-body">
                        <p><strong>æ¥å£åœ°å€ï¼š</strong> <code>/api/regions</code></p>
                        <p><strong>æè¿°ï¼š</strong> è·å–æŒ‡å®šå¹´ä»½çš„åœ°åŒºæ’ååˆ—è¡¨</p>
                        <div class="param-input">
                            <label class="form-label">å¹´ä»½ï¼š</label>
                            <input type="number" class="form-control" id="regions-year" value="2024" min="2005" max="2030">
                        </div>
                        <button class="btn btn-warning btn-sm" onclick="testRegionsData()">
                            ğŸ§ª æµ‹è¯•æ¥å£
                        </button>
                        <div id="regions-data-response" class="response-area mt-3" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card api-card">
                    <div class="card-header bg-warning text-dark">
                        <h5 class="mb-0">
                            <span class="badge bg-success method-badge me-2">GET</span>
                            è·å–å¯ç”¨å¹´ä»½
                        </h5>
                    </div>
                    <div class="card-body">
                        <p><strong>æ¥å£åœ°å€ï¼š</strong> <code>/api/years</code></p>
                        <p><strong>æè¿°ï¼š</strong> è·å–è€¦åˆåè°ƒåº¦åˆ†æå¯ç”¨çš„å¹´ä»½åˆ—è¡¨</p>
                        <button class="btn btn-warning btn-sm" onclick="testAPI('/api/years', 'GET', null, 'years-response')">
                            ğŸ§ª æµ‹è¯•æ¥å£
                        </button>
                        <div id="years-response" class="response-area mt-3" style="display: none;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- GDPé¢„æµ‹ API -->
        <div class="row mt-4">
            <div class="col-12">
                <h3 class="mb-4">ğŸ”® GDPé¢„æµ‹ API</h3>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="card api-card">
                    <div class="card-header bg-purple text-white" style="background-color: #6f42c1;">
                        <h5 class="mb-0">
                            <span class="badge bg-success method-badge me-2">GET</span>
                            è·å–å†å²GDPæ•°æ®
                        </h5>
                    </div>
                    <div class="card-body">
                        <p><strong>æ¥å£åœ°å€ï¼š</strong> <code>/api/gdp/historical/{province}</code></p>
                        <p><strong>æè¿°ï¼š</strong> è·å–æŒ‡å®šçœä»½çš„å†å²GDPæ•°æ®</p>
                        <div class="param-input">
                            <label class="form-label">çœä»½ï¼š</label>
                            <select class="form-select" id="historical-province">
                                <option value="åŒ—äº¬å¸‚">åŒ—äº¬å¸‚</option>
                                <option value="ä¸Šæµ·å¸‚">ä¸Šæµ·å¸‚</option>
                                <option value="å¹¿ä¸œçœ">å¹¿ä¸œçœ</option>
                                <option value="æ±Ÿè‹çœ">æ±Ÿè‹çœ</option>
                                <option value="æµ™æ±Ÿçœ">æµ™æ±Ÿçœ</option>
                            </select>
                        </div>
                        <button class="btn btn-purple btn-sm" style="background-color: #6f42c1;" onclick="testHistoricalData()">
                            ğŸ§ª æµ‹è¯•æ¥å£
                        </button>
                        <div id="historical-data-response" class="response-area mt-3" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card api-card">
                    <div class="card-header bg-purple text-white" style="background-color: #6f42c1;">
                        <h5 class="mb-0">
                            <span class="badge bg-success method-badge me-2">GET</span>
                            è·å–GDPé¢„æµ‹
                        </h5>
                    </div>
                    <div class="card-body">
                        <p><strong>æ¥å£åœ°å€ï¼š</strong> <code>/api/gdp/predict/{province}</code></p>
                        <p><strong>æè¿°ï¼š</strong> è·å–æŒ‡å®šçœä»½çš„GDPé¢„æµ‹å€¼</p>
                        <div class="param-input">
                            <label class="form-label">çœä»½ï¼š</label>
                            <select class="form-select" id="predict-province">
                                <option value="åŒ—äº¬å¸‚">åŒ—äº¬å¸‚</option>
                                <option value="ä¸Šæµ·å¸‚">ä¸Šæµ·å¸‚</option>
                                <option value="å¹¿ä¸œçœ">å¹¿ä¸œçœ</option>
                                <option value="æ±Ÿè‹çœ">æ±Ÿè‹çœ</option>
                                <option value="æµ™æ±Ÿçœ">æµ™æ±Ÿçœ</option>
                            </select>
                        </div>
                        <button class="btn btn-purple btn-sm" style="background-color: #6f42c1;" onclick="testPredictData()">
                            ğŸ§ª æµ‹è¯•æ¥å£
                        </button>
                        <div id="predict-data-response" class="response-area mt-3" style="display: none;"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="card api-card">
                    <div class="card-header bg-purple text-white" style="background-color: #6f42c1;">
                        <h5 class="mb-0">
                            <span class="badge bg-success method-badge me-2">GET</span>
                            è·å–è®­ç»ƒæŒ‡æ ‡
                        </h5>
                    </div>
                    <div class="card-body">
                        <p><strong>æ¥å£åœ°å€ï¼š</strong> <code>/api/gdp/metrics/{province}</code></p>
                        <p><strong>æè¿°ï¼š</strong> è·å–æŒ‡å®šçœä»½çš„æ¨¡å‹è®­ç»ƒæŒ‡æ ‡</p>
                        <div class="param-input">
                            <label class="form-label">çœä»½ï¼š</label>
                            <select class="form-select" id="metrics-province">
                                <option value="åŒ—äº¬å¸‚">åŒ—äº¬å¸‚</option>
                                <option value="ä¸Šæµ·å¸‚">ä¸Šæµ·å¸‚</option>
                                <option value="å¹¿ä¸œçœ">å¹¿ä¸œçœ</option>
                                <option value="æ±Ÿè‹çœ">æ±Ÿè‹çœ</option>
                                <option value="æµ™æ±Ÿçœ">æµ™æ±Ÿçœ</option>
                            </select>
                        </div>
                        <button class="btn btn-purple btn-sm" style="background-color: #6f42c1;" onclick="testMetricsData()">
                            ğŸ§ª æµ‹è¯•æ¥å£
                        </button>
                        <div id="metrics-data-response" class="response-area mt-3" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card api-card">
                    <div class="card-header bg-purple text-white" style="background-color: #6f42c1;">
                        <h5 class="mb-0">
                            <span class="badge bg-success method-badge me-2">POST</span>
                            è‡ªå®šä¹‰æ•°æ®é¢„æµ‹
                        </h5>
                    </div>
                    <div class="card-body">
                        <p><strong>æ¥å£åœ°å€ï¼š</strong> <code>/api/gdp/predict_custom</code></p>
                        <p><strong>æè¿°ï¼š</strong> é€šè¿‡ä¸Šä¼ CSVæ–‡ä»¶è¿›è¡ŒGDPé¢„æµ‹</p>
                        
                        <div class="param-input">
                            <label class="form-label">çœä»½ï¼š</label>
                            <select class="form-select" id="custom-predict-province">
                                <option value="åŒ—äº¬å¸‚">åŒ—äº¬å¸‚</option>
                                <option value="ä¸Šæµ·å¸‚">ä¸Šæµ·å¸‚</option>
                                <option value="å¹¿ä¸œçœ">å¹¿ä¸œçœ</option>
                                <option value="æ±Ÿè‹çœ">æ±Ÿè‹çœ</option>
                                <option value="æµ™æ±Ÿçœ">æµ™æ±Ÿçœ</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label small">ğŸ“ äººå£æ–‡ä»¶ (CSV)</label>
                            <input type="file" class="form-control form-control-sm" id="custom-population-file">
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label small">ğŸ’³ æ¶ˆè´¹æ–‡ä»¶ (CSV)</label>
                            <input type="file" class="form-control form-control-sm" id="custom-consumption-file">
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label small">ğŸ“ˆ GDPæ–‡ä»¶ (CSV)</label>
                            <input type="file" class="form-control form-control-sm" id="custom-gdp-file">
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label small">ğŸ’° è´¢æ”¿æ–‡ä»¶ (CSV)</label>
                            <input type="file" class="form-control form-control-sm" id="custom-financial-file">
                        </div>
                        
                        <button class="btn btn-purple btn-sm w-100" style="background-color: #6f42c1;" onclick="testCustomPrediction()">
                            ğŸ§ª ä¸Šä¼ å¹¶æµ‹è¯•
                        </button>
                        
                        <div id="custom-predict-response" class="response-area mt-3 small" style="display: none; max-height: 300px;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç©ºé—´åˆ†æ API -->
        <div class="row mt-4">
            <div class="col-12">
                <h3 class="mb-4">ğŸ—ºï¸ ç©ºé—´åˆ†æ API</h3>
            </div>
        </div>

        <div class="row">
            <div class="col-md-4">
                <div class="card api-card">
                    <div class="card-header bg-secondary text-white">
                        <h5 class="mb-0">
                            <span class="badge bg-success method-badge me-2">GET</span>
                            å¯ç”¨å¹´ä»½
                        </h5>
                    </div>
                    <div class="card-body">
                        <p><strong>æ¥å£åœ°å€ï¼š</strong> <code>/api/spatial/available-years</code></p>
                        <p><strong>æè¿°ï¼š</strong> è·å–ç©ºé—´åˆ†æå¯ç”¨å¹´ä»½</p>
                        <button class="btn btn-secondary btn-sm" onclick="testAPI('/api/spatial/available-years', 'GET', null, 'spatial-years-response')">
                            ğŸ§ª æµ‹è¯•æ¥å£
                        </button>
                        <div id="spatial-years-response" class="response-area mt-3" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card api-card">
                    <div class="card-header bg-secondary text-white">
                        <h5 class="mb-0">
                            <span class="badge bg-success method-badge me-2">GET</span>
                            ç©ºé—´æ•°æ®
                        </h5>
                    </div>
                    <div class="card-body">
                        <p><strong>æ¥å£åœ°å€ï¼š</strong> <code>/api/spatial/data/{year}</code></p>
                        <p><strong>æè¿°ï¼š</strong> è·å–æŒ‡å®šå¹´ä»½çš„ç©ºé—´åˆ†ææ•°æ®</p>
                        <div class="param-input">
                            <label class="form-label">å¹´ä»½ï¼š</label>
                            <input type="number" class="form-control" id="spatial-data-year" value="2024">
                        </div>
                        <button class="btn btn-secondary btn-sm" onclick="testSpatialData()">
                            ğŸ§ª æµ‹è¯•æ¥å£
                        </button>
                        <div id="spatial-data-response" class="response-area mt-3" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card api-card">
                    <div class="card-header bg-secondary text-white">
                        <h5 class="mb-0">
                            <span class="badge bg-warning method-badge me-2">POST</span>
                            åˆ·æ–°æ•°æ®
                        </h5>
                    </div>
                    <div class="card-body">
                        <p><strong>æ¥å£åœ°å€ï¼š</strong> <code>/api/spatial/refresh</code></p>
                        <p><strong>æè¿°ï¼š</strong> æ‰‹åŠ¨åˆ·æ–°ç©ºé—´åˆ†ææ•°æ®</p>
                        <button class="btn btn-secondary btn-sm" onclick="testAPI('/api/spatial/refresh', 'POST', {}, 'spatial-refresh-response')">
                            ğŸ§ª æµ‹è¯•æ¥å£
                        </button>
                        <div id="spatial-refresh-response" class="response-area mt-3" style="display: none;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- è¿”å›ä¸»é¡µæŒ‰é’® -->
        <div class="row mt-5 mb-4">
            <div class="col-12 text-center">
                <a href="/" class="btn btn-outline-primary btn-lg">
                    ğŸ  è¿”å›ç®¡ç†åå°
                </a>
            </div>
        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const API_BASE = '';

        // é€šç”¨APIæµ‹è¯•å‡½æ•°
        async function testAPI(endpoint, method = 'GET', data = null, responseId) {
            const responseArea = document.getElementById(responseId);
            responseArea.style.display = 'block';
            responseArea.innerHTML = '<div class="loading">ğŸ”„ è¯·æ±‚ä¸­...</div>';

            try {
                const options = {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json',
                    }
                };

                if (data && method !== 'GET') {
                    options.body = JSON.stringify(data);
                }

                const response = await fetch(API_BASE + endpoint, options);
                const result = await response.json();

                responseArea.innerHTML = `
                    <div class="success">âœ… çŠ¶æ€ç : ${response.status}</div>
                    <div class="mt-2"><strong>å“åº”æ•°æ®:</strong></div>
                    <pre>${JSON.stringify(result, null, 2)}</pre>
                `;
            } catch (error) {
                responseArea.innerHTML = `
                    <div class="error">âŒ è¯·æ±‚å¤±è´¥</div>
                    <div class="mt-2"><strong>é”™è¯¯ä¿¡æ¯:</strong></div>
                    <pre>${error.message}</pre>
                `;
            }
        }

        // å¤åˆ¶åˆ°å‰ªè´´æ¿
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            });
        }

        // æµ‹è¯•è¡¨æ•°æ®
        function testTableData() {
            const tableName = document.getElementById('table-name-select').value;
            testAPI(`/api/${tableName}`, 'GET', null, 'table-data-response');
        }

        // æµ‹è¯•è€¦åˆæ•°æ®
        function testCouplingData() {
            const year = document.getElementById('coupling-year').value;
            testAPI(`/api/data?year=${year}`, 'GET', null, 'coupling-data-response');
        }

        // æµ‹è¯•åœ°åŒºæ•°æ®
        function testRegionsData() {
            const year = document.getElementById('regions-year').value;
            testAPI(`/api/regions?year=${year}`, 'GET', null, 'regions-data-response');
        }

        // æµ‹è¯•å†å²æ•°æ®
        function testHistoricalData() {
            const province = document.getElementById('historical-province').value;
            testAPI(`/api/gdp/historical/${province}`, 'GET', null, 'historical-data-response');
        }

        // æµ‹è¯•é¢„æµ‹æ•°æ®
        function testPredictData() {
            const province = document.getElementById('predict-province').value;
            testAPI(`/api/gdp/predict/${province}`, 'GET', null, 'predict-data-response');
        }

        // æµ‹è¯•è®­ç»ƒæŒ‡æ ‡
        function testMetricsData() {
            const province = document.getElementById('metrics-province').value;
            testAPI(`/api/gdp/metrics/${province}`, 'GET', null, 'metrics-data-response');
        }

        // æµ‹è¯•è‡ªå®šä¹‰æ•°æ®é¢„æµ‹
        function testCustomPrediction() {
            const province = document.getElementById('custom-predict-province').value;
            const responseArea = document.getElementById('custom-predict-response');
            responseArea.style.display = 'block';
            responseArea.innerHTML = '<div class="loading">ğŸ”„ æ­£åœ¨ä¸Šä¼ å¹¶é¢„æµ‹...</div>';

            // æ£€æŸ¥æ–‡ä»¶
            const files = {
                population: document.getElementById('custom-population-file').files[0],
                consumption: document.getElementById('custom-consumption-file').files[0],
                gdp: document.getElementById('custom-gdp-file').files[0],
                financial: document.getElementById('custom-financial-file').files[0]
            };

            // éªŒè¯é€‰æ‹©
            if (!province) {
                responseArea.innerHTML = '<div class="error">âŒ è¯·é€‰æ‹©çœä»½</div>';
                return;
            }

            for (const [type, file] of Object.entries(files)) {
                if (!file || !file.name.toLowerCase().endsWith('.csv')) {
                    responseArea.innerHTML = `<div class="error">âŒ è¯·ä¸Šä¼ ${type}çš„CSVæ–‡ä»¶</div>`;
                    return;
                }
            }

            // æ„å»ºè¡¨å•æ•°æ®
            const formData = new FormData();
            formData.append('province', province);
            Object.entries(files).forEach(([key, file]) => {
                formData.append(key, file);
            });

            // å‘é€è¯·æ±‚ - ä¿®å¤å“åº”å¤„ç†
            fetch(API_BASE + '/api/gdp/predict_custom', {
                method: 'POST',
                body: formData
            })
            .then(async response => {
                const status = response.status;
                const data = await response.json();
                return { status, data };
            })
            .then(result => {
                let content = `<div class="success">âœ… é¢„æµ‹æˆåŠŸ (çŠ¶æ€ç : ${result.status})</div>`;
                if (result.data.success) {
                    content += `
                    <div class="mt-3"><strong>é¢„æµ‹ç»“æœ:</strong></div>
                    <pre>${JSON.stringify(result.data.data, null, 2)}</pre>
                    `;
                } else {
                    content += `<div class="error mt-2">âŒ ${result.data.message || 'é¢„æµ‹å¤±è´¥'}</div>`;
                }
                responseArea.innerHTML = content;
            })
            .catch(error => {
                responseArea.innerHTML = `
                <div class="error">âŒ è¯·æ±‚å¤±è´¥</div>
                <div class="mt-2"><strong>é”™è¯¯ä¿¡æ¯:</strong></div>
                <pre>${error.message}</pre>
                `;
            });
        }

        // æµ‹è¯•ç©ºé—´æ•°æ®
        function testSpatialData() {
            const year = document.getElementById('spatial-data-year').value;
            testAPI(`/api/spatial/data/${year}`, 'GET', null, 'spatial-data-response');
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('APIæµ‹è¯•é¡µé¢å·²åŠ è½½');
        });
    </script>
</body>
</html>
